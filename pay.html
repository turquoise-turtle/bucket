<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pay Calculator</title>
<link rel="manifest" href="bucket.webmanifest">
<link rel="icon" type="image/png" href="icons/icon32.png">
<link rel="stylesheet" href="main.css">

<p>Hours per shift: <input type="number" value=5.5 id="hours"><span class="rate">Base Pay:</span><input type="number" value=22.1575 id="baserate"></p>
<p>Weekdays: <input type="number" value=0 id="week"> <span class="rate">Rate:</span><input type="number" value=1.125 id="weekrate"></p>

<p>Saturdays: <input type="number" value=0 id="sat"><span class="rate">Rate:</span><input type="number" value=1.75 id="satrate"></p>

<p>Sundays: <input type="number" value=0 id="sun"><span class="rate">Rate:</span><input type="number" value=2 id="sunrate"></p>

<h3>Gross income: <span id="gross"></span></h3>

<h3>Net income: <span id="net"></span></h3>
<h3>Tax Withheld: <span id="twh"></span></h3>

<br>
<br>
<h3><a href="index.html" id="bucket">Bucket Splitter</a></h3>

<script>
	var qS = document.querySelector.bind(document);

	var hours = 5.5;
	var baserate = 22.1575;

	var week = parseFloat(qS('#week').value) || 0;
	var sat = parseFloat(qS('#sat').value) || 0;
	var sun = parseFloat(qS('#sun').value) || 0;
	var gross = 0;
	

	var weekrate = parseFloat(qS('#weekrate').value);
	var satrate = parseFloat(qS('#satrate').value);
	var sunrate = parseFloat(qS('#sunrate').value);
	console.log(week, weekrate, sat, satrate, sun, sunrate);
	recalculate();

	qS('#week').addEventListener('input', function(){
		week = parseFloat(qS('#week').value);
		recalculate()
	});
	qS('#sat').addEventListener('input', function(){
		sat = parseFloat(qS('#sat').value);
		recalculate()
	});
	qS('#sun').addEventListener('input', function(){
		sun = parseFloat(qS('#sun').value);
		recalculate()
	});

	qS('#weekrate').addEventListener('input', function(){
		weekrate = parseFloat(qS('#weekrate').value);
		recalculate()
	});
	qS('#satrate').addEventListener('input', function(){
		satrate = parseFloat(qS('#satrate').value);
		recalculate()
	});
	qS('#sunrate').addEventListener('input', function(){
		sunrate = parseFloat(qS('#sunrate').value);
		recalculate()
	});
	qS('#hours').addEventListener('input', function(){
		hours = parseFloat(qS('#hours').value);
		recalculate()
	});
	qS('#baserate').addEventListener('input', function(){
		baserate = parseFloat(qS('#baserate').value);
		recalculate()
	});
	function recalculate(){
		var weekpay = week * weekrate;
		var satpay = sat * satrate;
		var sunpay = sun * sunrate;
		gross = (weekpay + satpay + sunpay) * hours * baserate * 1.25;
		console.log(weekpay, satpay, sunpay, gross);
		qS('#gross').innerText = gross.toFixed(2);

		var wk = Math.floor(gross / 2) + 0.99;
		var a = 0;
		var b = 0;
		if (wk < 359) {
			//
		} else if (wk < 438) {
			a = 0.19;
			b = 68.3462;
		} else if (wk < 548) {
			a = 0.29;
			b = 112.1942;
		} else if (wk < 721) {
			a = 0.21;
			b = 68.3465;
		} else if (wk < 865) {
			a = 0.219;
			b = 74.8369;
		} else if (wk < 1282) {
			a = 0.3477;
			b = 186.2119;
		} else if (wk < 2307) {
			a = 0.3450;
			b = 182.7504;
		} else if (wk < 3461) {
			a = 0.3900;
			b = 286.5965;
		} else {
			a = 0.47;
			b = 563.5196;
		}

		var wh = Math.round(a * wk - b);
		var twh = wh * 2;
		qS('#twh').innerText = twh.toFixed(2);

		var net = gross - twh;
		qS('#net').innerText = net.toFixed(2);

		qS('#bucket').href = 'index.html#' + net.toFixed(2);
	}
</script>